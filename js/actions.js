document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("scroll",(()=>{const e=window.scrollY,t=document.querySelector("header"),r="header--active";e>90?t.classList.add(r):t.classList.remove(r)}));const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(i(),u(s),n=!1):(n=!0,i())}))}),{threshold:.5}),t=document.querySelector(".features");e.observe(t);const r=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target.getAttribute("data-id"),r=document.querySelector(".benefits__content--sticky img");if(e.isIntersecting){switch(r.classList.add("fade-out"),t){case"1":r.src="./imgs/calendio-benefit-1.webp",r.alt="Image 1 description";break;case"2":r.src="./imgs/calendio-benefit-2.webp",r.alt="Image 2 description";break;case"3":r.src="./imgs/calendio-benefit-3.webp",r.alt="Image 3 description"}r.classList.remove("fade-out")}}))}),{threshold:1});document.querySelectorAll(".benefits__content").forEach(((e,t)=>{e.setAttribute("data-id",t+1),r.observe(e)}));const o=document.querySelectorAll(".features-accordion__item");let s=0,c=null,n=!1;const a=document.querySelectorAll(".features-accordion__img img");function i(){o.forEach(((e,t)=>{e.querySelector(".features-accordion__content").classList.remove("features-accordion__content--height-auto"),e.querySelector(".features-accordion__content").style.paddingTop="0",e.querySelector(".features-accordion__progress").style.width="0%",e.querySelector(".features-accordion__progress-bar").style.display="none",e.querySelector("button").style.pointerEvents="auto",a[t].style.opacity="0",a[t].style.transform="scale(.9)",setTimeout((()=>a[t].style.display="none"),200),t===s&&(setTimeout((()=>a[t].style.display=""),200),setTimeout((()=>{a[t].style.opacity="1",a[t].style.transform="scale(1)"}),400),e.querySelector(".features-accordion__content").style.paddingTop="20px",e.querySelector(".features-accordion__content").style.display="",e.querySelector(".features-accordion__content").style.height="auto",e.querySelector("button").style.pointerEvents="none",setTimeout((()=>e.querySelector(".features-accordion__content").classList.add("features-accordion__content--height-auto")),10),e.querySelector(".features-accordion__progress-bar").style.display="")}))}const l=()=>{s=(s+1)%o.length,i(),u(s)};function u(e){let t=parseFloat(o[e].querySelector(".features-accordion__progress").style.width);c&&clearInterval(c),c=setInterval((()=>{if(t>=100)clearInterval(c),l();else{if(n)return;t+=1,o[e].querySelector(".features-accordion__progress").style.width=t+"%"}}),100)}o.forEach(((e,t)=>{e.querySelector("button").addEventListener("click",(()=>{s=t,i()})),e.addEventListener("mouseover",(()=>{n=!0})),e.addEventListener("mouseout",(()=>{n=!1,u(s)}))}));const d=document.querySelector(".menu__btn-mobile");let y=!1;d.addEventListener("click",(()=>{const e=document.querySelector(".menu__btn-mobile img");y?(y=!1,e.src="./imgs/icon-menu.svg",document.querySelector(".menu__wrapper-submenu").style.left="-100%"):(y=!0,e.src="./imgs/icon-close.svg",document.querySelector(".menu__wrapper-submenu").style.left="0")}))}));